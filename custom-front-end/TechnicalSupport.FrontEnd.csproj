<Project Sdk="h5.Target/25.11.62725">
  <PropertyGroup>
    <TargetFramework>netstandard2.0</TargetFramework>
    <LangVersion>7.2</LangVersion> <!-- H5 compiler supports C# 7.2 -->
    <NoWarn>1998</NoWarn>          <!-- Disable warning for async method without any await -->
    <DebugType>None</DebugType>
    <DebugSymbols>false</DebugSymbols>
    <GeneratePackageOnBuild>false</GeneratePackageOnBuild>
    <DefineConstants>H5</DefineConstants>
  </PropertyGroup>


  <!-- Don't forget  to perform a NuGet packages update to fetch the latest versions! -->
  <ItemGroup>
    <PackageReference Include="h5" Version="25.5.58366" />
    <PackageReference Include="h5.core" Version="24.11.53879" />
    <PackageReference Include="h5.Newtonsoft.Json" Version="24.2.45748" />
    <PackageReference Include="Plotly.H5" Version="2025.9.61626" />
    <PackageReference Include="Tesserae" Version="2025.10.62416" />
    <PackageReference Include="Mosaik.FrontEnd.API" Version="25.11.62520" />
    <PackageReference Include="Mosaik.FrontEnd.Core" Version="25.11.62520" />
    <PackageReference Include="Mosaik.FrontEnd.Admin" Version="25.11.62520" />
    <PackageReference Include="Mosaik.FrontEnd" Version="25.11.62520" />
  </ItemGroup>
  <ItemGroup>
    <None Update="h5\assets\css\support-style.css">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </None>
  </ItemGroup>

  <!-- When building in release mode, zips the output folder so it can be uploaded to the workspace via the UI -->
  <!--Condition="'$(Configuration)'=='Release'"-->
  <Target Name="ZipOutput" AfterTargets="Build">
    <!--<Exec Command="powershell.exe .\zip-output-folder.ps1 $(ProjectDir)bin\$(Configuration)\netstandard2.0\h5\" Condition="$([MSBuild]::IsOSPlatform('Windows'))" />-->
    
    <!--You can alternativelly remove the previous line and upload directly the front-end to your Curiosity workspace using the Curiosity CLI tool. You'll need to install the tool using 'dotnet tool install -g Curiosity.CLI'  and generate a token in the workspace for 'Interface Upload'-->
    <Exec Command="curiosity-cli upload-front-end -s http://localhost:8080/ -t eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJGb3IiOiJGUk9OVF9FTkRfVVBMT0FEIiwiQ3JlYXRlZEJ5IjoiYWRtaW4iLCJQdXJwb3NlIjoidGVzdCIsIm5iZiI6MTc2MjE5MTc0NCwiZXhwIjoyMDc3NTUxODA0LCJpc3MiOiJDdXJpb3NpdHkuU2VjdXJpdHkuQmVhcmVyIiwiYXVkIjoiQ3VyaW9zaXR5In0.PRLV2hdn4DkW00D-mj59Y-YWC23UA8S12xU7NPMlT80 -p $(ProjectDir)bin/$(Configuration)/netstandard2.0/h5/" ContinueOnError="true" />
  </Target>
</Project>
